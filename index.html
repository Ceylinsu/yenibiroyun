
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ceylinsu Arslan Arcade v3.9.0 (Kontrol Fix)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@400;600;700&family=Verdana:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #240046; --accent: #ff6d00; --neon-blue: #00e5ff; --neon-pink: #ff0055;
            --text: #e1bee7; --bg: #0d001a; --panel: #1a0033;
        }
        body {
            font-family: 'Rajdhani', sans-serif; margin: 0; background-color: var(--bg); color: var(--text);
            overflow-x: hidden; touch-action: manipulation;
        }
        h1, h2, h3, .brand-font { font-family: 'Orbitron', sans-serif; }
        
        /* HEADER */
        header {
            background: linear-gradient(90deg, #240046, #4a148c); padding: 1.2rem 5%;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 2px solid var(--accent); position: sticky; top: 0; z-index: 9999;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
        nav ul { display: flex; gap: 25px; list-style: none; margin: 0; padding: 0; }
        nav a { 
            color: white; text-decoration: none; cursor: pointer; 
            font-weight: 800; font-size: 1.1rem; 
            letter-spacing: 1px; transition: 0.3s; 
            font-family: 'Orbitron', sans-serif;
        }
        nav a:hover { color: var(--neon-blue); text-shadow: 0 0 15px var(--neon-blue); }
        
        .v-badge { 
            background: var(--accent); color: #000; padding: 6px 15px; 
            border-radius: 6px; font-weight: 900; font-family: 'Orbitron'; 
            font-size: 1.2rem; box-shadow: 0 0 10px var(--accent);
        }
        
        main { padding: 40px 5%; max-width: 1200px; margin: auto; }
        .section { display: none; animation: fadeIn 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Profil KartÄ± */
        .profile-card {
            background: linear-gradient(135deg, rgba(43,0,82,0.8), rgba(20,0,40,0.9));
            border: 1px solid var(--neon-blue); border-radius: 20px; padding: 40px;
            margin-top: 20px; box-shadow: 0 0 30px rgba(0, 229, 255, 0.15);
        }
        .profile-card h1 { color: #fff; margin-bottom: 15px; font-size: 2rem; }
        .profile-card p { font-size: 1.25rem; line-height: 1.7; color: #d1c4e9; }

        /* Kartlar (Oyun & Film) */
        .game-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; }
        .card { 
            background: var(--panel); border: 2px solid rgba(0, 229, 255, 0.3); padding: 30px; 
            border-radius: 16px; text-align: center; cursor: pointer; transition: all 0.3s ease;
        }
        .card:hover { transform: translateY(-8px); border-color: var(--neon-blue); box-shadow: 0 0 25px rgba(0, 229, 255, 0.4); }
        .card i { font-size: 3.5rem; color: var(--accent); margin-bottom: 20px; display: block; }

        /* Arcade & Skor */
        #arcade-container { 
            display: none; flex-direction: column; align-items: center; 
            background: #000; padding: 20px; border-radius: 20px; border: 4px solid var(--panel);
        }
        #score-display { 
            font-family: 'Verdana', sans-serif; font-weight: bold; font-size: 2.5rem; 
            color: var(--neon-blue); margin-bottom: 15px; text-shadow: 0 0 10px var(--neon-blue);
        }
        canvas { background: #000; border: 2px solid #333; max-width: 100%; border-radius: 8px; }

        /* Modallar */
        #movie-modal, #start-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(13, 0, 26, 0.95); z-index: 10000;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            backdrop-filter: blur(10px);
        }
        .modal-box {
            background: #1a0033; padding: 40px; border-radius: 20px; border: 2px solid var(--neon-blue);
            width: 350px; text-align: center;
        }
        .modal-box ul { list-style: none; padding: 0; text-align: left; }
        .modal-box li { padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); color: #fff; font-size: 1.1rem; }
        .play-btn {
            background: var(--neon-blue); color: #000; border: none; padding: 15px 40px;
            font-family: 'Orbitron'; font-weight: 900; border-radius: 50px; cursor: pointer; margin-top: 20px;
        }

        /* GÃ¼nlÃ¼k Tablosu */
        .log-container { overflow-x: auto; background: var(--panel); border-radius: 15px; margin-top: 20px; }
        table { width: 100%; border-collapse: collapse; min-width: 600px; }
        th, td { padding: 15px; border-bottom: 1px solid rgba(255, 255, 255, 0.05); text-align: left; }
        .v-cell { color: var(--accent); font-weight: 700; font-family: 'Orbitron'; }
    </style>
</head>
<body>

<header>
    <nav>
        <ul>
            <li><a onclick="showPage('home')">ANA SAYFA</a></li>
            <li><a onclick="showPage('games')">OYUNLAR</a></li>
            <li><a onclick="showPage('notes')">NOTLAR</a></li>
            <li><a onclick="showPage('movies')">FÄ°LMLER</a></li>
            <li><a onclick="showPage('logs')">GÃœNLÃœK</a></li>
        </ul>
    </nav>
    <span class="v-badge">v3.9.0</span>
</header>

<main>
    <section id="home" class="section active">
        <div class="profile-card">
            <h1>Merhaba, Ceylinsu! ðŸ‘¾</h1>
            <p>v3.5.0 temelindeki tÃ¼m Ã¶zellikleri koruyarak, kontrol sistemini senin iÃ§in kusursuzlaÅŸtÄ±rdÄ±m. TuÅŸ gecikmeleri giderildi. ArtÄ±k Pac-Man labirentinde daha keskin dÃ¶nÃ¼ÅŸler yapabilirsin!</p>
        </div>
    </section>

    <section id="games" class="section">
        <div id="game-selection" class="game-grid">
            <div class="card" onclick="prepareGame('snake')"><i class="fas fa-worm"></i><h3>SNAKE</h3><p>Hedef: 100 Puan!</p></div>
            <div class="card" onclick="prepareGame('pacman')"><i class="fas fa-ghost"></i><h3>PAC-MAN</h3><p>v3.5 Labirenti & YavaÅŸ Hayalet</p></div>
        </div>
        <div id="arcade-container">
            <div id="score-display">0</div>
            <canvas id="stage"></canvas>
            <button onclick="exitGame()" class="play-btn" style="background:var(--neon-pink); color:white;">OYUNU KAPAT</button>
        </div>
    </section>

    <section id="movies" class="section">
        <h2 class="brand-font">ðŸŽ¬ Film ArÅŸivi</h2>
        <div class="game-grid">
            <div class="card" onclick="openMovieModal('narnia')"><i class="fas fa-lion"></i><h3>Narnia GÃ¼nlÃ¼kleri</h3></div>
            <div class="card" onclick="openMovieModal('avengers')"><i class="fas fa-shield-halved"></i><h3>Avengers</h3></div>
            <div class="card" onclick="openMovieModal('spiderman')"><i class="fas fa-spider"></i><h3>Spiderman</h3></div>
        </div>
    </section>

    <section id="logs" class="section">
        <h2 class="brand-font">ðŸ“œ Versiyon GeÃ§miÅŸi</h2>
        <div class="log-container">
            <table>
                <thead><tr><th>Versiyon</th><th>GÃ¼ncelleme Ã–zeti</th></tr></thead>
                <tbody>
                    <tr><td class="v-cell">v3.9.0</td><td>Klavye gecikme sorunu giderildi (Global Input Buffer). v3.5.0 Ã¶zellikleri korundu.</td></tr>
                    <tr><td class="v-cell">v3.5.0</td><td>Ä°nteraktif film listeleri, v3.5 labirenti ve yavaÅŸ hayalet (1/3 hÄ±z) eklendi.</td></tr>
                    <tr><td class="v-cell">v1.0 - v3.4</td><td>Sistem temeli ve oyun motorlarÄ±.</td></tr>
                </tbody>
            </table>
        </div>
    </section>
</main>

<div id="movie-modal"><div class="modal-box"><h2 id="m-title" style="color:var(--neon-blue)"></h2><ul id="m-list"></ul><button onclick="closeModal()" class="play-btn">KAPAT</button></div></div>
<div id="start-screen"><div class="modal-box"><h2>OYUN BAÅžLIYOR</h2><p>YÃ¶n tuÅŸlarÄ±nÄ± kullan!</p><button id="start-btn" class="play-btn">BAÅžLA</button></div></div>

<script>
    let loop=null, currentInput=null;

    // --- KONTROL FÄ°X (v3.9.0) ---
    // TuÅŸlarÄ±n geÃ§ algÄ±lanmasÄ±nÄ± Ã¶nlemek iÃ§in en Ã¼st seviyede dinleme:
    window.addEventListener("keydown", (e) => {
        const gameKeys = ["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight", "Space"];
        if(gameKeys.includes(e.key)) {
            e.preventDefault(); // SayfanÄ±n kaymasÄ±nÄ± engelle
            if(currentInput) currentInput(e); // TuÅŸu anÄ±nda ilet
        }
    }, { passive: false });

    function showPage(id) {
        exitGame();
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    // FÄ°LM MODÃœLÃœ (v3.5.0)
    const movieData = {
        narnia: ["Aslan, CadÄ± ve Dolap", "Prens Kaspiyan", "Åžafak YÄ±ldÄ±zÄ±"],
        avengers: ["The Avengers", "Age of Ultron", "Infinity War", "Endgame"],
        spiderman: ["Tobey Maguire Serisi", "Andrew Garfield Serisi", "Tom Holland Serisi"]
    };
    function openMovieModal(key) {
        document.getElementById('m-title').innerText = key.toUpperCase();
        const list = document.getElementById('m-list');
        list.innerHTML = "";
        movieData[key].forEach(m => list.innerHTML += `<li>â€¢ ${m}</li>`);
        document.getElementById('movie-modal').style.display = 'flex';
    }
    function closeModal() { document.getElementById('movie-modal').style.display = 'none'; }

    // OYUN MOTORU
    function prepareGame(type) {
        document.getElementById('start-screen').style.display = 'flex';
        document.getElementById('start-btn').onclick = () => {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('game-selection').style.display = 'none';
            document.getElementById('arcade-container').style.display = 'flex';
            initGame(type);
        };
    }

    function initGame(type) {
        const cvs = document.getElementById('stage'), ctx = cvs.getContext('2d');
        document.getElementById('score-display').innerText = '0';
        if(type==='snake') startSnake(cvs,ctx);
        if(type==='pacman') startPacman(cvs,ctx);
    }

    function exitGame() { clearInterval(loop); document.getElementById('arcade-container').style.display = 'none'; document.getElementById('game-selection').style.display = 'grid'; }

    // --- SNAKE ---
    function startSnake(cvs, ctx) {
        cvs.width = 320; cvs.height = 320;
        let s=[{x:160,y:160}], dx=20, dy=0, f={x:40,y:40}, score=0;
        currentInput = (e) => {
            if(e.key==='ArrowUp' && dy===0){dx=0; dy=-20}
            if(e.key==='ArrowDown' && dy===0){dx=0; dy=20}
            if(e.key==='ArrowLeft' && dx===0){dx=-20; dy=0}
            if(e.key==='ArrowRight' && dx===0){dx=20; dy=0}
        };
        loop = setInterval(() => {
            ctx.fillStyle='black'; ctx.fillRect(0,0,320,320);
            let h = {x: s[0].x+dx, y: s[0].y+dy};
            if(h.x<0||h.x>=320||h.y<0||h.y>=320||s.some(p=>p.x===h.x&&p.y===h.y)){ alert("Skor: "+score); exitGame(); return;}
            s.unshift(h);
            if(h.x===f.x && h.y===f.y){
                score+=10; document.getElementById('score-display').innerText=score;
                if(score>=100){ alert("TEBRÄ°KLER!"); exitGame(); return;}
                f={x:Math.floor(Math.random()*15)*20, y:Math.floor(Math.random()*15)*20};
            } else s.pop();
            ctx.fillStyle='#ff0055'; ctx.fillRect(f.x,f.y,18,18);
            ctx.fillStyle='#00e5ff'; s.forEach(p=>ctx.fillRect(p.x,p.y,18,18));
        }, 150);
    }

    // --- PAC-MAN (v3.5 Labirenti ve YavaÅŸ Hayalet) ---
    function startPacman(cvs, ctx) {
        cvs.width=320; cvs.height=320;
        let px=40, py=40, gx=240, gy=240, score=0, dir=0, tick=0;
        const maze = [
            [1,1,1,1,1,1,1,1], [1,0,0,0,1,0,0,1], [1,0,1,0,1,0,1,1], [1,0,0,0,0,0,0,1],
            [1,1,0,1,1,1,0,1], [1,0,0,0,0,1,0,1], [1,0,1,1,0,0,0,1], [1,1,1,1,1,1,1,1]
        ];
        let dots = []; for(let r=0; r<8; r++) for(let c=0; c<8; c++) if(maze[r][c]===0) dots.push({x:c*40+20, y:r*40+20, e:true});

        currentInput = (e) => {
            let nx=px, ny=py;
            if(e.key==='ArrowRight') {nx+=40; dir=0} if(e.key==='ArrowLeft') {nx-=40; dir=Math.PI}
            if(e.key==='ArrowUp') {ny-=40; dir=1.5*Math.PI} if(e.key==='ArrowDown') {ny+=40; dir=0.5*Math.PI}
            if(maze[Math.floor(ny/40)][Math.floor(nx/40)]===0){px=nx; py=ny}
        };

        loop = setInterval(() => {
            ctx.fillStyle='black'; ctx.fillRect(0,0,320,320);
            ctx.fillStyle='#240046'; 
            for(let r=0; r<8; r++) for(let c=0; c<8; c++) if(maze[r][c]===1) {
                ctx.fillRect(c*40,r*40,40,40); ctx.strokeStyle='#4a148c'; ctx.strokeRect(c*40,r*40,40,40);
            }
            ctx.fillStyle='#ffeb3b'; let rem=0;
            dots.forEach(d=>{
                if(d.e){
                    rem++; ctx.beginPath(); ctx.arc(d.x,d.y,4,0,7); ctx.fill();
                    if(Math.abs(px+20-d.x)<10 && Math.abs(py+20-d.y)<10){d.e=false; score+=10; document.getElementById('score-display').innerText=score;}
                }
            });
            if(rem===0){ alert("ZAFER!"); exitGame(); return; }

            // YAVAÅž HAYALET (v3.5 - 3 turda 1 hareket)
            tick++;
            if(tick % 3 === 0) {
                if(gx<px && maze[Math.floor(gy/40)][Math.floor((gx+40)/40)]===0) gx+=40;
                else if(gx>px && maze[Math.floor(gy/40)][Math.floor((gx-40)/40)]===0) gx-=40;
                else if(gy<py && maze[Math.floor((gy+40)/40)][Math.floor(gx/40)]===0) gy+=40;
                else if(gy>py && maze[Math.floor((gy-40)/40)][Math.floor(gx/40)]===0) gy-=40;
            }

            ctx.fillStyle='red'; ctx.beginPath(); ctx.arc(gx+20, gy+20, 16, 0, 7); ctx.fill();
            ctx.fillStyle='yellow'; ctx.beginPath(); ctx.arc(px+20, py+20, 16, dir+0.2, dir+6.1); ctx.lineTo(px+20, py+20); ctx.fill();
            if(px===gx && py===gy){ alert("YAKALANDIN!"); exitGame(); }
        }, 200);
    }
</script>
</body>
</html>
